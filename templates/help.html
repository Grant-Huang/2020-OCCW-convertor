{% extends "base.html" %}

{% block title %}{{ t('help_title') }} - {{ t('system_name') }}{% endblock %}

{% block content %}
<!-- 页面标题 -->
<div class="page-header">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="page-title">
                    <i class="fas fa-question-circle me-3 page-icon"></i>
                    {{ t('help_title') }}
                </h1>
                <p class="page-subtitle">{{ t('system_name') }} {{ t('help_usage_guide') }}</p>
            </div>
            <div class="col-md-4 text-end">
                <div class="status-indicator">
                    <i class="fas fa-book me-2"></i>{{ t('help_documentation') }}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <!-- 快速导航 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-map me-2"></i>快速导航</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-2">
                            <a href="#overview" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                <i class="fas fa-info-circle me-1"></i>系统介绍
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#pdf-import" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                <i class="fas fa-file-pdf me-1"></i>导入2020报价单
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#manual-create" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                <i class="fas fa-edit me-1"></i>手动创建报价单
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="#troubleshooting" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                <i class="fas fa-tools me-1"></i>常见问题与解决
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="#support" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                <i class="fas fa-headset me-1"></i>技术支持
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 系统介绍 -->
    <div class="row mb-4" id="overview">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>系统介绍</h5>
                </div>
                <div class="card-body">
                    <h6 class="text-primary">系统概述</h6>
                    <p>{{ t('help_system_intro_desc') }}</p>
                    
                    <div class="alert alert-info">
                        <h6 class="alert-heading"><i class="fas fa-shield-alt me-2"></i>用户权限说明</h6>
                        <p class="mb-2"><strong>普通用户：</strong>可以上传PDF报价单进行解析，手动创建报价单，导出各种格式的报价单</p>
                        <p class="mb-0"><strong>管理员：</strong>除普通用户功能外，还可以管理价格表和SKU映射关系</p>
                    </div>
                    
                    <h6 class="text-primary mt-4">主要功能</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>PDF报价单智能解析</li>
                                <li><i class="fas fa-check text-success me-2"></i>自动SKU生成和映射</li>
                                <li><i class="fas fa-check text-success me-2"></i>价格表管理（管理员）</li>
                                <li><i class="fas fa-check text-success me-2"></i>多格式导出支持</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>多语言界面支持</li>
                                <li><i class="fas fa-check text-success me-2"></i>手动创建报价单</li>
                                <li><i class="fas fa-check text-success me-2"></i>SKU映射管理（管理员）</li>
                                <li><i class="fas fa-check text-success me-2"></i>实时价格查询</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 导入2020报价单 -->
    <div class="row mb-4" id="pdf-import">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-file-pdf me-2"></i>导入2020报价单</h5>
                </div>
                <div class="card-body">
                    <h6 class="text-primary">操作步骤</h6>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center mb-3">
                                <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <span class="h4 mb-0">1</span>
                                </div>
                                <h6 class="text-primary mt-2">上传PDF文件</h6>
                                <p class="small text-muted">选择从2020软件导出的PDF报价单文件</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center mb-3">
                                <div class="bg-info text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <span class="h4 mb-0">2</span>
                                </div>
                                <h6 class="text-info mt-2">智能解析</h6>
                                <p class="small text-muted">系统自动识别产品信息和价格</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center mb-3">
                                <div class="bg-warning text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <span class="h4 mb-0">3</span>
                                </div>
                                <h6 class="text-warning mt-2">SKU生成</h6>
                                <p class="small text-muted">自动生成标准SKU并应用映射</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center mb-3">
                                <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    <span class="h4 mb-0">4</span>
                                </div>
                                <h6 class="text-success mt-2">导出报价单</h6>
                                <p class="small text-muted">选择格式导出最终报价单</p>
                            </div>
                        </div>
                    </div>

                    <h6 class="text-primary mt-4">支持的文件格式</h6>
                    <div class="alert alert-light">
                        <ul class="mb-0">
                            <li><strong>PDF格式：</strong>从2020软件导出的标准PDF报价单</li>
                            <li><strong>文件大小：</strong>最大支持16MB</li>
                            <li><strong>语言支持：</strong>支持中文、英文、法文等多语言PDF</li>
                        </ul>
                    </div>

                    <h6 class="text-primary mt-4">解析功能说明</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary"><i class="fas fa-cog me-1"></i>内容解析</h6>
                            <ul class="small">
                                <li>自动识别产品描述和规格</li>
                                <li>提取数量和单价信息</li>
                                <li>识别门板颜色和变体</li>
                                <li>处理多行产品信息</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary"><i class="fas fa-tags me-1"></i>特殊处理</h6>
                            <ul class="small">
                                <li>智能合并跨行产品信息</li>
                                <li>自动处理产品变体组合</li>
                                <li>支持组合件和硬件识别</li>
                                <li>处理特殊字符和格式</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 手动创建报价单 -->
    <div class="row mb-4" id="manual-create">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-edit me-2"></i>手动创建报价单</h5>
                </div>
                <div class="card-body">
                    <h6 class="text-primary">功能说明</h6>
                    <p>当您没有PDF文件或需要手动调整报价单时，可以使用手动创建功能。</p>
                    
                    <h6 class="text-primary mt-4">操作步骤</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary"><i class="fas fa-plus me-1"></i>添加产品</h6>
                            <ul class="small">
                                <li>点击"添加产品"按钮</li>
                                <li>选择产品类型（组合件、门板、柜身等）</li>
                                <li>填写产品名称和规格</li>
                                <li>选择门板变体和柜身变体</li>
                                <li>输入单价和数量</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary"><i class="fas fa-edit me-1"></i>编辑管理</h6>
                            <ul class="small">
                                <li>可以随时编辑产品信息</li>
                                <li>支持删除单个产品</li>
                                <li>可以清空整个报价单</li>
                                <li>实时计算总价</li>
                            </ul>
                        </div>
                    </div>

                    <h6 class="text-primary mt-4">支持的产品类型</h6>
                    <div class="alert alert-light">
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="mb-0">
                                    <li><strong>RTA Assm.组合件</strong></li>
                                    <li><strong>Door门板</strong></li>
                                    <li><strong>BOX柜身</strong></li>
                                    <li><strong>Ending Panel端板</strong></li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="mb-0">
                                    <li><strong>Molding装饰条</strong></li>
                                    <li><strong>Toe Kick踢脚线</strong></li>
                                    <li><strong>Filler填充板</strong></li>
                                    <li><strong>Hardware五金件</strong></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 常见问题与解决 -->
    <div class="row mb-4" id="troubleshooting">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-tools me-2"></i>常见问题与解决</h5>
                </div>
                <div class="card-body">
                    <div class="accordion" id="troubleshootingAccordion">
                        <!-- PDF解析问题 -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="pdfIssues">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePdfIssues">
                                    <i class="fas fa-file-pdf me-2"></i>PDF解析问题
                                </button>
                            </h2>
                            <div id="collapsePdfIssues" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                                <div class="accordion-body">
                                    <h6 class="text-danger">PDF上传后无法解析</h6>
                                    <p><strong>可能原因：</strong></p>
                                    <ul>
                                        <li>PDF文件不是从2020软件导出的标准格式</li>
                                        <li>文件损坏或加密</li>
                                        <li>文件大小超过16MB限制</li>
                                    </ul>
                                    <p><strong>解决方案：</strong></p>
                                    <ul>
                                        <li>确保使用2020软件的标准PDF导出功能</li>
                                        <li>检查文件是否完整且未加密</li>
                                        <li>尝试重新导出PDF文件</li>
                                    </ul>
                                    
                                    <h6 class="text-warning mt-3">产品信息识别错误</h6>
                                    <p><strong>可能原因：</strong></p>
                                    <ul>
                                        <li>PDF格式不规范</li>
                                        <li>产品描述包含特殊字符</li>
                                        <li>多行产品信息格式异常</li>
                                    </ul>
                                    <p><strong>解决方案：</strong></p>
                                    <ul>
                                        <li>使用标准格式的PDF文件</li>
                                        <li>检查产品描述是否规范</li>
                                        <li>可以手动创建报价单进行修正</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- SKU和价格问题 -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="skuPriceIssues">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSkuPriceIssues">
                                    <i class="fas fa-tags me-2"></i>SKU和价格问题
                                </button>
                            </h2>
                            <div id="collapseSkuPriceIssues" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                <div class="accordion-body">
                                    <h6 class="text-warning">SKU显示为0或无法匹配</h6>
                                    <p><strong>可能原因：</strong></p>
                                    <ul>
                                        <li>价格表中没有对应的SKU</li>
                                        <li>SKU映射关系未配置</li>
                                        <li>产品类型不在支持范围内</li>
                                    </ul>
                                    <p><strong>解决方案：</strong></p>
                                    <ul>
                                        <li>联系管理员检查价格表</li>
                                        <li>确认SKU映射关系已配置</li>
                                        <li>检查产品类型是否支持</li>
                                    </ul>
                                    
                                    <h6 class="text-info mt-3">价格显示异常</h6>
                                    <p><strong>可能原因：</strong></p>
                                    <ul>
                                        <li>价格表数据不完整</li>
                                        <li>SKU格式不匹配</li>
                                        <li>变体信息缺失</li>
                                    </ul>
                                    <p><strong>解决方案：</strong></p>
                                    <ul>
                                        <li>联系管理员更新价格表</li>
                                        <li>检查SKU格式是否正确</li>
                                        <li>确认变体信息完整</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- 导出问题 -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="exportIssues">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExportIssues">
                                    <i class="fas fa-download me-2"></i>导出问题
                                </button>
                            </h2>
                            <div id="collapseExportIssues" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                <div class="accordion-body">
                                    <h6 class="text-info">导出文件格式问题</h6>
                                    <p><strong>支持格式：</strong></p>
                                    <ul>
                                        <li><strong>2020格式：</strong>兼容2020软件的Excel格式</li>
                                        <li><strong>OCCW格式：</strong>标准OCCW系统格式</li>
                                        <li><strong>PDF格式：</strong>可打印的PDF报价单</li>
                                    </ul>
                                    
                                    <h6 class="text-warning mt-3">导出失败</h6>
                                    <p><strong>可能原因：</strong></p>
                                    <ul>
                                        <li>浏览器下载设置问题</li>
                                        <li>文件生成过程中出错</li>
                                        <li>网络连接问题</li>
                                    </ul>
                                    <p><strong>解决方案：</strong></p>
                                    <ul>
                                        <li>检查浏览器下载设置</li>
                                        <li>刷新页面重新尝试</li>
                                        <li>检查网络连接</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 技术支持 -->
    <div class="row mb-4" id="support">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-headset me-2"></i>技术支持</h5>
                </div>
                <div class="card-body">
                    <h6 class="text-primary">联系方式</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <h6><i class="fas fa-envelope me-2"></i>邮件支持</h6>
                            <p>support@occw.com</p>
                            <small class="text-muted">工作日24小时内回复</small>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-phone me-2"></i>电话支持</h6>
                            <p>400-123-4567</p>
                            <small class="text-muted">工作日 9:00-18:00</small>
                        </div>
                    </div>

                    <h6 class="text-primary mt-4">版本信息</h6>
                    <div class="alert alert-info">
                        <div class="row">
                            <div class="col-md-6">
                                <p class="mb-1"><strong>当前版本：</strong>v{{ version }}</p>
                                <p class="mb-1"><strong>系统名称：</strong>{{ t('system_name') }}</p>
                            </div>
                            <div class="col-md-6">
                                <p class="mb-1"><strong>更新日期：</strong>{{ t('last_update') }}</p>
                                <p class="mb-0"><strong>技术支持：</strong>{{ t('company_full_name') }}</p>
                            </div>
                        </div>
                    </div>

                    <h6 class="text-primary mt-4">使用建议</h6>
                    <div class="alert alert-warning">
                        <ul class="mb-0">
                            <li>使用标准格式的PDF文件，提高解析准确度</li>
                            <li>大文件处理时请耐心等待，避免重复操作</li>
                            <li>定期备份重要的报价单数据</li>
                            <li>如遇问题，请先查看常见问题解决方案</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 